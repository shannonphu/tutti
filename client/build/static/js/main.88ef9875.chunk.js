(this["webpackJsonpboilerplate-react-redux-project"]=this["webpackJsonpboilerplate-react-redux-project"]||[]).push([[0],{136:function(e,t,a){e.exports=a.p+"static/media/transparent_lick.8864ee61.png"},137:function(e,t){e.exports={server:{host:"localhost",port:8080},client:{internalHost:"localhost",externalHost:"tut.ti",port:3e3}}},144:function(e,t,a){e.exports=a.p+"static/media/kevin_bossa.83c3770d.mp3"},169:function(e,t,a){e.exports=a(236)},18:function(e,t){e.exports={ROOM_STATE:Object.freeze({EMPTY:"EMPTY",INVALID:"INVALID",VALID:"VALID"}),GAME_STAGE:Object.freeze({WAITING_FOR_PLAYERS:"Waiting for players",WAITING_TO_START:"Start game",BASELINE_PLAYER_RECORDING:"First player recording",OTHER_PLAYERS_LISTENING_TO_BASELINE:"Review first recording",OTHER_PLAYERS_RECORDING:"Everyone else records",FINAL_RECORDING_DONE:"Review final recording"})}},200:function(e,t,a){},202:function(e,t,a){},233:function(e,t){},236:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"getUsername",(function(){return E})),a.d(n,"editUsername",(function(){return f})),a.d(n,"sentMessageToRoom",(function(){return O})),a.d(n,"pingHello",(function(){return v})),a.d(n,"getRoom",(function(){return j})),a.d(n,"addRoom",(function(){return T})),a.d(n,"updateRoomBpmSettings",(function(){return R})),a.d(n,"updateRoomNumBarsSettings",(function(){return k})),a.d(n,"updateRoomNumLoopsSettings",(function(){return C})),a.d(n,"addUserToRoom",(function(){return S})),a.d(n,"uploadAudio",(function(){return A})),a.d(n,"uploadLoopedAudio",(function(){return N})),a.d(n,"broadcastRecordingState",(function(){return P})),a.d(n,"advanceToNextGameStage",(function(){return _})),a.d(n,"setBaselinePlayer",(function(){return L}));var r=a(0),o=a.n(r),s=a(17),i=a.n(s),c=a(88),l=a(39),u=a(41),m=a(20),p=a(101),d=a.n(p);function h(e){return d.a.get(e).then((function(e){return e.data})).catch((function(t){return Promise.reject("GET ".concat(e," failed: ").concat(t))}))}function b(e,t){return d.a.post(e,t).then((function(e){return e.data})).catch((function(t){return Promise.reject("POST ".concat(e," failed: ").concat(t))}))}function E(e){return function(t,a){h("/api/user/name").then((function(e){return t({type:"GET_USER_NAME",name:e.data})})).then((function(){e&&e()})).catch((function(e){return console.error("Error in getUsername: "+e)}))}}function f(e,t){return function(a,n){(function(e){return b("/api/user/name/edit",{name:e})})(e).then((function(e){return a({type:"GET_USER_NAME",name:e.data})})).then((function(){t&&t()})).catch((function(e){return console.error("Error in addUsername: "+e)}))}}function O(e){return function(t,a){var n=a(),r=n.user.playerName,o=n.room.roomCode;t({type:"CHAT_MESSAGE_SENT"}),t({type:"socket/MESSAGE",playerName:r,message:e,roomCode:o})}}function v(e){return function(t,a){t({type:"socket/HELLO",data:e})}}var g=a(25),y=a(8);function j(e,t){return function(a,n){(function(e){return h("/api/room/".concat(e))})(e).then((function(e){return null==e.data?(console.error("Room code does not exist."),a({type:"SET_INVALID_ROOM",roomCode:null}),null):(a({type:"LOAD_ROOM",roomCode:e.data.roomCode,bpm:e.data.bpm,numBars:e.data.numBars,numLoops:e.data.numLoops,users:e.data.users}),e)})).then((function(e){t&&t(e)})).catch((function(e){return console.error("Error in getRoom: "+e)}))}}function T(e,t,a,n,r){return function(o,s){(function(e,t,a,n){return b("/api/room/new",{bpm:e,numBars:t,numLoops:a,user:n})})(e,t,a,n).then((function(r){return o({type:"LOAD_ROOM",roomCode:r.data,bpm:e,numBars:t,numLoops:a,users:Object(g.a)({},n.playerName,Object(y.a)({},n))}),o({type:"ADD_USER",playerName:n.playerName}),o({type:"socket/JOIN_ROOM",user:n,roomCode:r.data}),r})).then((function(e){r&&r(e)})).catch((function(e){return console.error("Error in addRoom: "+e)}))}}function R(e){return function(t,a){t({type:"EDIT_ROOM_BPM",bpm:e}),t({type:"socket/EDIT_ROOM_BPM",roomCode:a().room.roomCode,bpm:e})}}function k(e){return function(t,a){t({type:"EDIT_ROOM_NUM_BARS",numBars:e}),t({type:"socket/EDIT_ROOM_NUM_BARS",roomCode:a().room.roomCode,numBars:e})}}function C(e){return function(t,a){t({type:"EDIT_ROOM_NUM_LOOPS",numLoops:e}),t({type:"socket/EDIT_ROOM_NUM_LOOPS",roomCode:a().room.roomCode,numLoops:e})}}function S(e,t){return function(a,n){var r=n().room.roomCode;(function(e,t){return b("/api/room/".concat(t,"/user/new"),e)})(e,r).then((function(t){return a({type:"ADD_USER",playerName:e.playerName}),a({type:"socket/JOIN_ROOM",user:e,roomCode:r}),t})).then((function(e){t&&t(e)})).catch((function(e){return console.error("Error in addUserToRoom: "+e)}))}}function A(e){return function(t,a){var n=a();t({type:"socket/UPLOAD_AUDIO",playerName:n.user.playerName,roomCode:n.room.roomCode,audioData:e})}}function N(e){return function(t,a){var n=a();t({type:"socket/UPLOAD_LOOPED_AUDIO",playerName:n.user.playerName,roomCode:n.room.roomCode,audioData:e})}}function P(e){return function(t,a){var n=a();t({type:"socket/PLAYER_UPDATED_RECORDING_STATE",playerName:n.user.playerName,roomCode:n.room.roomCode,isRecording:e}),t({type:"UPDATED_RECORDING_STATE",isRecording:e})}}function _(){return function(e,t){e({type:"socket/ADVANCE_GAME_NEXT_STAGE",roomCode:t().room.roomCode})}}function L(){return function(e,t){var a=t();e({type:"socket/SET_BASELINE_PLAYER",roomCode:a.room.roomCode,user:a.user})}}var M=a(11),x=a(12),I=a(14),D=a(13),w=a(289),U=a(155),G=Object(U.a)({palette:{primary:{extraLight:"#8db8b3",light:"#588984",main:"#4C7C78",dark:"#2F6B66",landing:"#282B2B"},secondary:{main:"#4F518C"},error:{main:"#a83232"},contrastThreshold:3,tonalOffset:.2}}),B=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(){return Object(M.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement(w.a,{theme:G},o.a.createElement($,null),o.a.createElement(m.d,null,o.a.createElement(m.b,{path:"/room/:roomId?",component:function(t){return o.a.createElement(Yt,Object.assign({},e.props,t))}}),o.a.createElement(m.b,{path:"/test",render:function(){return o.a.createElement(K,e.props)}}),o.a.createElement(m.b,{path:"/",render:function(){return o.a.createElement(ce,e.props)}})))}}]),a}(r.Component);var F=Object(m.g)(Object(c.b)((function(e){return console.log("Redux Store: "+JSON.stringify(e)),{user:e.user,chat:e.chat,room:e.room,game:e.game}}),(function(e){return Object(u.b)(n,e)}))(B)),H=a(5),Y=a(290),W=a(293),V=a(294),z=a(237),J=a(46),q=a.n(J),X=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(){return Object(M.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement(Y.a,{position:"sticky",className:e.root},o.a.createElement(W.a,{variant:"dense"},o.a.createElement(z.a,{edge:"start",color:"inherit","aria-label":"menu"},o.a.createElement(q.a,null)),o.a.createElement(V.a,{variant:"h6",color:"inherit"},o.a.createElement(l.b,{to:"/",className:e.title},"tut.ti")),o.a.createElement("div",{className:e.slider},o.a.createElement($t,this.props))))}}]),a}(r.Component),$=Object(H.a)((function(e){return{root:{backgroundColor:e.palette.primary.dark},title:{fontFamily:"Parisienne",fontWeight:700,fontSize:28,color:e.palette.primary.contrastText,textDecoration:"none"},slider:{position:"absolute",right:0}}}))(X),K=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(){return Object(M.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(ue,this.props),o.a.createElement("hr",null),o.a.createElement(le,this.props))}}]),a}(r.Component),Q=a(6),Z=a(295),ee=a(296),te=a(238),ae=a(159),ne=a(312);function re(e){return null!==e.room.roomCode}var oe=a(136),se=a.n(oe),ie=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(M.a)(this,a),(n=t.call(this,e)).state={playerName:"",isError:!1},n.handleJoinRoom=n.handleJoinRoom.bind(Object(Q.a)(n)),n.handleCreateRoom=n.handleCreateRoom.bind(Object(Q.a)(n)),n.handleTextChange=n.handleTextChange.bind(Object(Q.a)(n)),n.buttonGenerator=n.buttonGenerator.bind(Object(Q.a)(n)),n}return Object(x.a)(a,[{key:"handleJoinRoom",value:function(e){if(e.preventDefault(),this.state.playerName.length<1)this.setState({isError:!0});else{var t={playerName:this.state.playerName};this.props.addUserToRoom(t)}}},{key:"handleCreateRoom",value:function(e){var t=this;if(e.preventDefault(),this.state.playerName.length<1)this.setState({isError:!0});else{var a={playerName:this.state.playerName},n=this.props.room;this.props.addRoom(n.bpm,n.numBars,n.numLoops,a,(function(e){t.props.history.push("/room/".concat(e.data))}))}}},{key:"handleTextChange",value:function(e){this.setState({playerName:e.target.value,isError:!1})}},{key:"buttonGenerator",value:function(){return re(this.props)?o.a.createElement(te.a,{onClick:this.handleJoinRoom,variant:"outlined"},"Join Room"):o.a.createElement(te.a,{onClick:this.handleCreateRoom,variant:"outlined"},"Create Room")}},{key:"render",value:function(){var e=this.props.classes;return o.a.createElement(Z.a,{container:!0,component:"main",className:e.root},o.a.createElement(ee.a,null),o.a.createElement(Z.a,{item:!0,xs:12,sm:8,md:5,component:ae.a,variant:"outlined",square:!0},o.a.createElement(Z.a,{container:!0,spacing:2,direction:"column",alignItems:"center",justify:"center",className:e.container},o.a.createElement(Z.a,{item:!0},o.a.createElement("form",{onSubmit:re(this.props)?this.handleJoinRoom:this.handleCreateRoom},o.a.createElement(ne.a,Object(g.a)({autoFocus:!0,onChange:this.handleTextChange,variant:"outlined",margin:"normal",id:"name",label:"Name",autoComplete:"off",error:this.state.isError,helperText:this.state.isError?"pls":"",fullWidth:!0},"autoFocus",!0)))),o.a.createElement(Z.a,{item:!0},this.buttonGenerator()))),o.a.createElement(Z.a,{item:!0,xs:!1,sm:4,md:7,className:e.image}))}}]),a}(r.Component),ce=Object(H.a)((function(e){return{root:{flexGrow:1,marginTop:-20},image:{backgroundImage:"url(".concat(se.a,")"),backgroundRepeat:"no-repeat",backgroundSize:"90%",backgroundColor:e.palette.primary.landing,backgroundPosition:"center center"},paper:{flexDirection:"column",alignItems:"center"},container:{minHeight:"95vh"}}}))(ie),le=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(M.a)(this,a),(n=t.call(this,e)).state={},n.submitHandler=n.submitHandler.bind(Object(Q.a)(n)),n}return Object(x.a)(a,[{key:"submitHandler",value:function(e){e.preventDefault();var t=this.refs.text.value;this.props.addMessage("Shannon",t),this.refs.text.value=null}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h3",null,"DummyChat"),o.a.createElement("p",null,"This is an example of socket.io. All clients will receive whatever was input."),o.a.createElement("form",{onSubmit:this.submitHandler},o.a.createElement("div",null,o.a.createElement("input",{type:"text",placeholder:"Type your message...",ref:"text"})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit",name:"action"},"Submit"))),o.a.createElement("div",null,this.props.chat.messages.map((function(e,t){return o.a.createElement("li",{key:t},e.message)}))))}}]),a}(r.Component),ue=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(M.a)(this,a),(n=t.call(this,e)).state={name:""},n.submitHandler=n.submitHandler.bind(Object(Q.a)(n)),n.handleTextFieldChange=n.handleTextFieldChange.bind(Object(Q.a)(n)),e.getUsername(),n}return Object(x.a)(a,[{key:"handleTextFieldChange",value:function(e){this.setState(Object(g.a)({},e.target.id,e.target.value))}},{key:"submitHandler",value:function(e){e.preventDefault(),this.state.name.length>0&&(this.props.editUsername(this.state.name),this.setState({name:""}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h3",null,"DummyPost"),o.a.createElement("p",null,"This is an example of a normal GET/POST request"),o.a.createElement("div",null,"This text will update to whatever was input below: ",this.props.user.name),o.a.createElement("form",{onSubmit:this.submitHandler},o.a.createElement("div",null,o.a.createElement(ne.a,{ref:"name",id:"name",label:"Name",value:this.state.name,onChange:this.handleTextFieldChange})),o.a.createElement("div",null,o.a.createElement(te.a,{variant:"contained",label:"Submit",type:"submit"},"Submit"))))}}]),a}(r.Component),me=a(297),pe=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(M.a)(this,a),(n=t.call(this,e)).state={},n}return Object(x.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(me.a,{fixed:!0},o.a.createElement(Z.a,{container:!0,spacing:3},o.a.createElement(Z.a,{item:!0,xs:12,md:4},o.a.createElement(et,this.props)),o.a.createElement(Z.a,{item:!0,xs:12,md:4},o.a.createElement(Te,this.props)),o.a.createElement(Z.a,{item:!0,xs:12,md:4},o.a.createElement(_e,this.props)))))}}]),a}(r.Component),de=a(156),he=a(315),be=a(316),Ee=a(298),fe=a(299),Oe=a(138),ve=a.n(Oe),ge=a(137),ye=a.n(ge),je=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(M.a)(this,a),(n=t.call(this,e)).state={},n.getExternalRoomUrl=n.getExternalRoomUrl.bind(Object(Q.a)(n)),n}return Object(x.a)(a,[{key:"getExternalRoomUrl",value:function(){return"https://".concat(ye.a.client.externalHost,"/room/").concat(this.props.room.roomCode)}},{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement(ae.a,{className:t.roomRoot},o.a.createElement(V.a,{variant:"h5",gutterBottom:!0},"Your room:"),o.a.createElement(Z.a,{container:!0,alignItems:"center"},o.a.createElement(Z.a,{item:!0,xs:10},o.a.createElement(l.b,{to:"/room/".concat(this.props.room.roomCode),className:t.link},this.getExternalRoomUrl())),o.a.createElement(Z.a,{item:!0,xs:2},o.a.createElement(z.a,{color:"primary","aria-label":"copy",onClick:function(){navigator.clipboard.writeText("http://localhost:3000/room/".concat(e.props.room.roomCode))}},o.a.createElement(ve.a,null)))),o.a.createElement("div",{className:t.playerGrid},o.a.createElement(V.a,{variant:"h5",gutterBottom:!0},"Players:"),o.a.createElement(Ee.a,{cellHeight:40,cols:3},Object.entries(this.props.room.users).map((function(e){var a=Object(de.a)(e,2),n=a[0];a[1];return o.a.createElement(fe.a,{key:n,cols:1,className:t.gridListTile},o.a.createElement(be.a,{color:"primary",variant:"outlined",avatar:o.a.createElement(he.a,null,n.charAt(0).toUpperCase()),label:n}))})))))}}]),a}(r.Component),Te=Object(H.a)((function(e){return{root:{},roomRoot:{padding:16,minHeight:350},link:{color:e.palette.primary.dark},playerGrid:{marginTop:20},gridListTile:{textAlign:"center"}}}))(je),Re=a(300),ke=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(M.a)(this,a),(n=t.call(this,e)).state={},n}return Object(x.a)(a,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement("div",{className:e.root},o.a.createElement(he.a,{className:"".concat(e.purple," ").concat(e.medium)},this.props.name.charAt(0).toUpperCase()))}}]),a}(r.Component),Ce=(Object(H.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)}},purple:{color:e.palette.getContrastText(Re.a[500]),backgroundColor:Re.a[500]},small:{width:e.spacing(3),height:e.spacing(3)},medium:{width:e.spacing(5),height:e.spacing(5)},large:{width:e.spacing(7),height:e.spacing(7)}}}))(ke),a(317)),Se=a(140),Ae=a.n(Se),Ne=a(139),Pe=(a(200),function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(M.a)(this,a),(n=t.call(this,e)).state={currMessage:""},n.submitHandler=n.submitHandler.bind(Object(Q.a)(n)),n.handleTextFieldChange=n.handleTextFieldChange.bind(Object(Q.a)(n)),n}return Object(x.a)(a,[{key:"handleTextFieldChange",value:function(e){this.setState(Object(g.a)({},e.target.name,e.target.value))}},{key:"submitHandler",value:function(e){e.preventDefault(),this.state.currMessage.length>0&&this.props.sentMessageToRoom(this.state.currMessage)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.theme;return o.a.createElement(ae.a,null,o.a.createElement("div",{className:t.chatContainer},o.a.createElement(Ne.ChatFeed,{messages:this.props.user.messages,isTyping:!1,hasInputField:!1,showSenderName:!0,bubblesCentered:!1,maxHeight:250,className:t.chatFeed,InputProps:!0,bubbleStyles:{text:{fontSize:16},chatbubble:{backgroundColor:a.palette.primary.light,borderRadius:30,padding:"12px 15px"}}}),o.a.createElement("form",{onSubmit:this.submitHandler,autoComplete:"off"},o.a.createElement(Z.a,{container:!0},o.a.createElement(Z.a,{item:!0,xs:11},o.a.createElement(ne.a,{autoFocus:"chat"==this.props.room.lastUpdatedField,style:{width:"100%"},name:"currMessage",ref:"message",value:this.state.currMessage,onChange:this.handleTextFieldChange,helperText:"Type a message..."})),o.a.createElement(Z.a,{item:!0,xs:1},o.a.createElement(z.a,{"aria-label":"send",type:"submit",name:"action"},o.a.createElement(Ae.a,null)))))))}}]),a}(r.Component)),_e=Object(Ce.a)(Object(H.a)((function(e){return{root:{},chatContainer:{padding:16,height:300},chatFeed:{minHeight:300}}}))(Pe)),Le=a(2),Me=a.n(Le),xe=a(301),Ie=a(53),De=a.n(Ie),we=a(55),Ue=a.n(we),Ge=a(83),Be=a.n(Ge),Fe=a(82),He=a.n(Fe),Ye=a(84),We=a.n(Ye),Ve=a(54),ze=a.n(Ve),Je=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(M.a)(this,a),(n=t.call(this,e)).state={isLoaded:!1,isUserPlayerSet:!1,isClickTrack:!0,isLoopPlayerSet:!1,isAllUserPlayerSet:!1},n.createMetronome=n.createMetronome.bind(Object(Q.a)(n)),n.createClickTrack=n.createClickTrack.bind(Object(Q.a)(n)),n.createLoopPlayer=n.createLoopPlayer.bind(Object(Q.a)(n)),n.createAllUserPlayer=n.createAllUserPlayer.bind(Object(Q.a)(n)),n.handleRecordLoop=n.handleRecordLoop.bind(Object(Q.a)(n)),n.handleRecordOverLoop=n.handleRecordOverLoop.bind(Object(Q.a)(n)),n.handlePlaybackMerged=n.handlePlaybackMerged.bind(Object(Q.a)(n)),n.handleToggleClickTrack=n.handleToggleClickTrack.bind(Object(Q.a)(n)),n.startMicrophonePermissions=n.startMicrophonePermissions.bind(Object(Q.a)(n)),n.stopMicrophoneAccess=n.stopMicrophoneAccess.bind(Object(Q.a)(n)),n.startRecording=n.startRecording.bind(Object(Q.a)(n)),n.stopRecording=n.stopRecording.bind(Object(Q.a)(n)),n.stopRecordingLoop=n.stopRecordingLoop.bind(Object(Q.a)(n)),n.saveAudio=n.saveAudio.bind(Object(Q.a)(n)),n.saveLoopedAudio=n.saveLoopedAudio.bind(Object(Q.a)(n)),Me.a.context.latencyHint="interactive",Me.a.Transport.bpm.value=n.props.room.bpm,Me.a.Buffer.on("load",(function(){n.setState({isLoaded:!0})})),n.toneNumBars=Me.a.Time(n.props.room.numBars,"m"),n.toneTotalBars=Me.a.Time(n.props.room.numBars*n.props.room.numLoops,"m"),n.loopPlayer=null,n.userPlayers=null,n.allUserPlayer=null,n.metronome=null,n.clickTrack=null,n.startRecordEvent=new Me.a.Event(n.startRecording),n.stopRecordEvent=new Me.a.Event(n.stopRecording),n.stopRecordLoopEvent=new Me.a.Event(n.stopRecordingLoop),n.state.isLoopPlayerSet||n.createLoopPlayer(),n.state.isAllUserPlayerSet||n.createAllUserPlayer(),n.createClickTrack(),n.createMetronome(),n}return Object(x.a)(a,[{key:"createMetronome",value:function(){var e=(new Me.a.MembraneSynth).toMaster();this.metronome=new Me.a.Loop((function(t){e.triggerAttackRelease("C1","4n",t)}),"4n")}},{key:"createClickTrack",value:function(){var e=new Me.a.Player(De.a).toMaster();e.volume.value=1,this.clickTrack=new Me.a.Loop((function(t){e.start(t,0,"4n")}),"4n")}},{key:"createLoopPlayer",value:function(){if(null!=this.props.game.baselinePlayer){var e=this.props.game.baselinePlayer.playerName,t=this.props.room.users[e];if(null!=t.loopUrl){var a=t.loopUrl,n=new Me.a.Player(a).toMaster();n.fadeOut="4n",this.loopPlayer=new Me.a.Event((function(e,t){n.start(e,0,t)}),this.toneNumBars+Me.a.Time("8n")),this.loopPlayer.loop=this.props.room.numLoops,this.loopPlayer.loopStart=0,this.loopPlayer.loopEnd=this.toneNumBars,this.state=Object(y.a)(Object(y.a)({},this.state),{},{isLoopPlayerSet:!0})}}}},{key:"createAllUserPlayer",value:function(){var e=this,t={},a={};Object.keys(this.props.room.users).map((function(n,r){var o=e.props.room.users[n];null!=o.audioUrl&&(t[n]=o.audioUrl,a[n]=[0,n])})),Object.entries(t).length>0&&(this.userPlayers=new Me.a.Players(t).toMaster(),this.allUserPlayer=new Me.a.Part((function(t,a){e.userPlayers.get(a).start(t,0,e.toneTotalBars+Me.a.Time("4n"))}),Object.values(a)),this.state=Object(y.a)(Object(y.a)({},this.state),{},{isAllUserPlayerSet:!0}))}},{key:"startMicrophonePermissions",value:function(){var e=this;navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){window.streamReference=t,e.setState({hasAccessToMicrophone:!0}),e.mediaRecorder=new MediaRecorder(t),e.mediaRecorder.ondataavailable=function(t){t.data&&t.data.size>0&&e.chunks.push(t.data)}}))}},{key:"stopMicrophoneAccess",value:function(){window.streamReference.getAudioTracks().forEach((function(e){e.stop()})),this.setState({hasAccessToMicrophone:!1})}},{key:"startRecording",value:function(){"inactive"==this.mediaRecorder.state&&(this.chunks=[],this.mediaRecorder.start(5),this.setState({isRecording:!0}))}},{key:"stopRecordingLoop",value:function(){"recording"==this.mediaRecorder.state&&(this.mediaRecorder.stop(),this.setState({isRecording:!1}),this.stopMicrophoneAccess(),this.saveLoopedAudio())}},{key:"stopRecording",value:function(){"recording"==this.mediaRecorder.state&&(this.mediaRecorder.stop(),this.setState({isRecording:!1}),this.stopMicrophoneAccess(),this.saveAudio())}},{key:"saveLoopedAudio",value:function(){var e=new Blob(this.chunks,{type:"audio/webm;codecs=opus"}),t=URL.createObjectURL(e);this.props.uploadLoopedAudio(e),this.setState({blobData:e,blobUri:t})}},{key:"saveAudio",value:function(){var e=new Blob(this.chunks,{type:"audio/webm;codecs=opus"}),t=URL.createObjectURL(e);this.props.uploadAudio(e),this.setState({blobData:e,blobUri:t})}},{key:"handleToggleClickTrack",value:function(e){e.preventDefault(),this.setState({isClickTrack:!this.state.isClickTrack}),this.clickTrack.mute=this.state.isClickTrack}},{key:"handleRecordLoop",value:function(e){e.preventDefault(),this.state.hasAccessToMicrophone||this.startMicrophonePermissions(),Me.a.Transport.stop(),Me.a.Transport.cancel(),this.metronome.start(0).stop("1m"),this.clickTrack.start("1m").stop(Me.a.Time("1m")+this.toneNumBars),this.startRecordEvent.start("1m"),this.stopRecordLoopEvent.start(Me.a.Time("1m")+this.toneNumBars+Me.a.Time("4n")),Me.a.Transport.start()}},{key:"handleRecordOverLoop",value:function(e){e.preventDefault(),this.state.hasAccessToMicrophone||this.startMicrophonePermissions(),Me.a.Transport.stop(),Me.a.Transport.cancel(),this.metronome.start(0).stop("1m"),this.clickTrack.start("1m").stop(Me.a.Time("1m")+this.toneTotalBars),this.loopPlayer.start("1m").stop(Me.a.Time("1m")+this.toneTotalBars),this.startRecordEvent.start("1m"),this.stopRecordEvent.start(Me.a.Time("1m")+this.toneTotalBars+Me.a.Time("4n")),Me.a.Transport.start()}},{key:"handlePlaybackMerged",value:function(e){e.preventDefault(),Me.a.Transport.stop(),Me.a.Transport.cancel(),this.loopPlayer.start(0).stop(this.toneTotalBars),this.allUserPlayer.start(0).stop(this.toneNumBars+Me.a.Time("4n")),Me.a.Transport.start().stop(Me.a.Time("1m")+this.toneTotalBars)}},{key:"render",value:function(){return o.a.createElement(me.a,{fixed:!0},this.props.room.roomCode?o.a.createElement(Z.a,{container:!0,spacing:5},o.a.createElement(Z.a,{item:!0,xs:8},o.a.createElement(bt,this.props)),o.a.createElement(Z.a,{item:!0,xs:4},o.a.createElement(et,this.props),o.a.createElement(_e,this.props),o.a.createElement(ct,this.props)),o.a.createElement(Z.a,{item:!0},o.a.createElement(xe.a,{orientation:"vertical",color:"primary"},o.a.createElement(te.a,{onClick:this.handleToggleClickTrack,variant:"contained",color:"default",startIcon:this.state.isClickTrack?o.a.createElement(He.a,null):o.a.createElement(Be.a,null)},"Click Track"),o.a.createElement(te.a,{onClick:this.handleRecordLoop,disabled:this.state.isRecording,variant:"contained",color:"primary",startIcon:o.a.createElement(ze.a,null)},"Record a Loop"),o.a.createElement(te.a,{onClick:this.handleRecordOverLoop,disabled:this.state.isRecording||!this.state.isLoaded||!this.state.isLoopPlayerSet,variant:"contained",color:"primary",startIcon:o.a.createElement(Ue.a,null)},"Record over the Loop"),o.a.createElement(te.a,{onClick:this.handlePlaybackMerged,disabled:this.state.isRecording||!this.state.isLoaded||!this.state.isAllUserPlayerSet,variant:"contained",color:"secondary",startIcon:o.a.createElement(We.a,null)},"Play back merged Loop and Recording")))):o.a.createElement("div",null,"Join the room first!"))}},{key:"componentWillUnmount",value:function(){Me.a.Transport.cancel()}}]),a}(r.Component),qe=a(303),Xe=a(304),$e=a(306),Ke=a(302),Qe=a(305),Ze=a(18),et=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(M.a)(this,a),(n=t.call(this,e)).state={},n.restructureData=n.restructureData.bind(Object(Q.a)(n)),n.handleTextFieldChange=n.handleTextFieldChange.bind(Object(Q.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(Q.a)(n)),n}return Object(x.a)(a,[{key:"restructureData",value:function(){var e=this.props.room;return[{label:"BPM",name:"bpm",value:e.bpm},{label:"# Bars",name:"numBars",value:e.numBars},{label:"# Loops",name:"numLoops",value:e.numLoops}]}},{key:"handleTextFieldChange",value:function(e){var t=e.target.name,a=parseInt(e.target.value)||0;switch(t){case"bpm":this.props.updateRoomBpmSettings(a);break;case"numBars":this.props.updateRoomNumBarsSettings(a);break;case"numLoops":this.props.updateRoomNumLoopsSettings(a)}}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.game.stage==Ze.GAME_STAGE.WAITING_TO_START&&this.props.setBaselinePlayer(),this.props.advanceToNextGameStage()}},{key:"render",value:function(){var e=this,t=this.restructureData();return o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement(Ke.a,{component:ae.a},o.a.createElement(qe.a,{size:"small","aria-label":"simple table"},o.a.createElement(Xe.a,null,o.a.createElement(Qe.a,null,o.a.createElement($e.a,{colSpan:2},o.a.createElement(V.a,{variant:"h6"},"Game Settings"))),t.map((function(t,a){return o.a.createElement(Qe.a,{key:a},o.a.createElement($e.a,{component:"th",scope:"row"},t.label,"bpm"==t.name?o.a.createElement(ot,e.props):null),o.a.createElement($e.a,{align:"left",colSpan:2},e.props.game.stage==Ze.GAME_STAGE.WAITING_FOR_PLAYERS||e.props.game.stage==Ze.GAME_STAGE.WAITING_TO_START?o.a.createElement(ne.a,{autoFocus:e.props.room.lastUpdatedField==t.name,value:t.value,name:t.name,type:"number",onChange:e.handleTextFieldChange,margin:"none",error:t.value<=0,helperText:t.value<=0?"".concat(t.label," must be greater than 0"):"",style:{width:"100%"}}):t.value))})),o.a.createElement(Qe.a,null,o.a.createElement($e.a,{component:"th",scope:"row"},"Total Measures"),o.a.createElement($e.a,null,this.props.room.numBars*this.props.room.numLoops),o.a.createElement($e.a,{align:"right",style:{padding:"0 16px 0 0"}},function(){switch(e.props.game.stage){case Ze.GAME_STAGE.WAITING_FOR_PLAYERS:return o.a.createElement(te.a,{type:"submit",name:"start",color:"primary",onClick:e.handleSubmit,endIcon:o.a.createElement(q.a,{fontSize:"small"})},"Enter Room");case Ze.GAME_STAGE.WAITING_TO_START:return o.a.createElement(te.a,{type:"submit",name:"start",color:"primary",endIcon:o.a.createElement(q.a,{fontSize:"small"})},"I'll start first!");default:return null}}()))))))}}]),a}(r.Component),tt=a(141),at=a.n(tt),nt=a(86),rt=a.n(nt),ot=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(e){var n;Object(M.a)(this,a),(n=t.call(this,e)).state={isOn:!1},n.handleClick=n.handleClick.bind(Object(Q.a)(n));var r=new Me.a.Volume(5),o=(new Me.a.MembraneSynth).chain(r,Me.a.Master);return n.loop=new Me.a.Loop((function(e){o.triggerAttackRelease("C1","4n",e)}),"4n"),n}return Object(x.a)(a,[{key:"handleClick",value:function(e){e.preventDefault(),this.state.isOn?this.loop.stop():this.loop.start(),"stopped"==Me.a.Transport.state&&Me.a.Transport.start(),this.setState({isOn:!this.state.isOn})}},{key:"render",value:function(){return o.a.createElement(z.a,{"aria-label":"send",type:"submit",name:"action",onClick:this.handleClick,style:{margin:"0 0 0 10px",padding:0}},this.state.isOn?o.a.createElement(rt.a,null):o.a.createElement(at.a,null))}}]),a}(r.Component),st=a(142),it=a.n(st),ct=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(M.a)(this,a),(n=t.call(this,e)).state={hasAccessToMicrophone:!1,isRecording:!1,blobData:null,blobUri:null},n.chunks=[],n.mic=new Me.a.UserMedia,n.mic.connect(Me.a.Master),n.mediaRecorder=null,n.handleClick=n.handleClick.bind(Object(Q.a)(n)),n.startMicrophonePermissions=n.startMicrophonePermissions.bind(Object(Q.a)(n)),n.stopMicrophoneAccess=n.stopMicrophoneAccess.bind(Object(Q.a)(n)),n.startRecording=n.startRecording.bind(Object(Q.a)(n)),n.stopRecording=n.stopRecording.bind(Object(Q.a)(n)),n.saveAudio=n.saveAudio.bind(Object(Q.a)(n)),n}return Object(x.a)(a,[{key:"startMicrophonePermissions",value:function(){var e=this;navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){window.streamReference=t,e.setState({hasAccessToMicrophone:!0}),e.mediaRecorder=new MediaRecorder(t),e.mediaRecorder.ondataavailable=function(t){t.data&&t.data.size>0&&e.chunks.push(t.data)}}))}},{key:"stopMicrophoneAccess",value:function(){window.streamReference.getAudioTracks().forEach((function(e){e.stop()}))}},{key:"startRecording",value:function(){var e=this;this.state.hasAccessToMicrophone||this.startMicrophonePermissions(),this.chunks=[],this.mic.open().then((function(){Me.a.Transport.start(),e.mediaRecorder.start(5),e.setState({isRecording:!0})}))}},{key:"stopRecording",value:function(){this.setState({hasAccessToMicrophone:!1}),this.stopMicrophoneAccess(),this.mediaRecorder.stop(),this.mic.close(),Me.a.Transport.stop(),this.setState({isRecording:!1})}},{key:"saveAudio",value:function(){var e=new Blob(this.chunks,{type:"audio/webm;codecs=opus"}),t=URL.createObjectURL(e);this.props.uploadAudio(e),this.setState({blobData:e,blobUri:t})}},{key:"handleClick",value:function(){var e=this;Me.a.Time("".concat(this.props.room.numBars,"m")).toSeconds();this.startRecording(),setTimeout((function(){e.stopRecording(),e.saveAudio()}),3e3)}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(z.a,{type:"submit",name:"action",onClick:this.handleClick,style:{margin:"0 0 0 10px",padding:0}},this.state.isRecording?o.a.createElement(it.a,null):o.a.createElement(Ue.a,null)))}}]),a}(r.Component),lt=a(314),ut=a(307),mt=a(308),pt=a(143),dt=a.n(pt),ht=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(e){var n;Object(M.a)(this,a),(n=t.call(this,e)).playSelectedAudio=n.playSelectedAudio.bind(Object(Q.a)(n)),n.stopSelectedAudio=n.stopSelectedAudio.bind(Object(Q.a)(n)),n.playMergedAudio=n.playMergedAudio.bind(Object(Q.a)(n)),n.getPlayerList=n.getPlayerList.bind(Object(Q.a)(n)),n.shouldPanelBeFixed=n.shouldPanelBeFixed.bind(Object(Q.a)(n)),n.handlePanelChange=n.handlePanelChange.bind(Object(Q.a)(n));var r={},o={};return Object.keys(n.props.room.users).map((function(e,t){var a=n.props.room.users[e];null!=a.audioUrl&&(r[e]=a.audioUrl),o[e]=!1})),n.state={isPlayingMerged:!1,isPlayingSingle:!1,panelWidth:500,isExpanded:o},n.sequence=null,n.player=new Me.a.Players(r,{onload:function(){n.sequence=new Me.a.Sequence((function(e,t){var a=n.player.get(t);a.sync(),a.start()}),Object.keys(r),"4n"),n.sequence.sync()}}).toMaster(),n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){var e=window.getComputedStyle(this.refs.expansionPanel);this.setState({panelWidth:this.refs.expansionPanel.clientWidth-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)})}},{key:"playSelectedAudio",value:function(e){Me.a.Transport.start(),this.player.get(e).start(),this.setState({isPlayingSingle:!0})}},{key:"stopSelectedAudio",value:function(e){this.player.get(e).stop(),Me.a.Transport.stop(),this.setState({isPlayingSingle:!1})}},{key:"playMergedAudio",value:function(){this.state.isPlayingMerged?(this.sequence.stop(this.sequence.length),Me.a.Transport.stop()):(Me.a.Transport.start(),this.sequence.start()),this.setState({isPlayingMerged:!this.state.isPlayingMerged})}},{key:"getPlayerList",value:function(){var e=this,t=[],a=null,n=null;return Object.keys(this.props.room.users).forEach((function(r){var o=Object(y.a)(Object(y.a)({},e.props.room.users[r]),{},{playerName:r});e.props.game.baselinePlayer&&r==e.props.game.baselinePlayer.playerName?a=o:r==e.props.user.playerName?n=o:t.push(o)})),a&&t.unshift(a),n&&t.push(n),t}},{key:"shouldPanelBeFixed",value:function(e){return!(!e.audioUrl||e.playerName!=this.props.game.baselinePlayer.playerName&&e.playerName!=this.props.user.playerName)}},{key:"handlePanelChange",value:function(e){var t=Object(y.a)(Object(y.a)({},this.state.isExpanded),{},Object(g.a)({},e.playerName,!this.state.isExpanded[e.playerName]));this.setState({isExpanded:t})}},{key:"render",value:function(){var e=this;this.props.classes;return o.a.createElement("div",{width:1},this.getPlayerList().map((function(t,a){return o.a.createElement(lt.a,{key:a,expanded:e.shouldPanelBeFixed(t)||e.state.isExpanded[t.playerName]},o.a.createElement(ut.a,{expandIcon:void 0==t.audioUrl||e.shouldPanelBeFixed(t)?null:o.a.createElement(dt.a,null),onClick:function(){return e.handlePanelChange(t)}},t.isRecording?o.a.createElement(ea,null):null,o.a.createElement(V.a,null,t.playerName)),o.a.createElement(mt.a,{ref:"expansionPanel"},null!=t.audioUrl?o.a.createElement(At,{audioName:t.playerName,audioUrl:t.audioUrl,height:100,width:e.state.panelWidth,shouldShowControls:!1}):null))})))}}]),a}(r.Component),bt=Object(H.a)((function(e){return{root:{}}}))(ht),Et=a(144),ft=a.n(Et),Ot=(r.Component,a(145)),vt=a.n(Ot),gt=(r.Component,r.Component,a(104)),yt=a.n(gt),jt=a(146),Tt=a(147),Rt=a.n(Tt),kt=a(148),Ct=a.n(kt);function St(e){return{externalPlayer:new Me.a.Player(e),eventEmitter:null,init:function(e){var t=this;this.eventEmitter=e,this.externalPlayer.sync(),this.externalPlayer.start(),Me.a.connectSeries(this.externalPlayer,Me.a.Master),e.emit("player.canplay"),Me.a.Transport.scheduleRepeat((function(){var a=t.getCurrentTime();e.emit("player.timeupdate",a),a>=t.getDuration()&&Me.a.Transport.stop()}),.25)},destroy:function(){Me.a.context.dispose(),this.externalPlayer=null,this.eventEmitter=null},play:function(){Me.a.Transport.start(Me.a.now(),this.getCurrentTime()),this.eventEmitter.emit("player.play",this.getCurrentTime())},pause:function(){Me.a.Transport.pause(),this.eventEmitter.emit("player.pause",this.getCurrentTime())},isPlaying:function(){return"started"===Me.a.Transport.state},seek:function(e){Me.a.Transport.seconds=e,this.eventEmitter.emit("player.seeked",this.getCurrentTime()),this.eventEmitter.emit("player.timeupdate",this.getCurrentTime())},isSeeking:function(){return!1},getCurrentTime:function(){return this.externalPlayer.buffer.toSeconds(Me.a.Transport.position)},getDuration:function(){return this.externalPlayer.buffer.duration}}}var At=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(e){var n;Object(M.a)(this,a),(n=t.call(this,e)).state={peaks:null,isPlaying:!1},n.play=n.play.bind(Object(Q.a)(n)),n.pause=n.pause.bind(Object(Q.a)(n));var r=window.AudioContext||window.webkitAudioContext;return n.audioContext=new r,n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){var e=Object(jt.a)(yt.a.mark((function e(){var t,a,n,r,o=this;return yt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.audioName,a=this.props.audioUrl,n=this.props.height,r=this,e.next=6,fetch(a).then((function(e){return e.blob()})).then((function(e){return new Response(e).arrayBuffer()})).then((function(e){return o.audioContext.decodeAudioData(e)})).then((function(e){var a={containers:{overview:o.refs["overView-".concat(t)]},height:n,overviewWaveformColor:"navy",player:new St(e),webAudio:{audioBuffer:e,scale:128,multiChannel:!1},keyboard:!0,showPlayheadTime:!0,zoomLevels:[128,256,512,1024,2048,4096]};Rt.a.init(a,(function(e,t){e?console.error(e.message):r.setState({peaks:t})}))}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"play",value:function(){this.state.peaks.player.play()}},{key:"pause",value:function(){this.state.peaks.player.pause()}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{ref:"zoomView-".concat(this.props.audioName),style:{display:"none"}}),o.a.createElement("div",{ref:"overView-".concat(this.props.audioName),style:{backgroundColor:"white",borderColor:"grey",height:this.props.height,width:this.props.width}}),this.state.peaks&&this.props.shouldShowControls?o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(z.a,{onClick:this.play},o.a.createElement(Ct.a,null)),o.a.createElement(z.a,{onClick:this.pause},o.a.createElement(rt.a,null)))):null)}}]),a}(r.Component),Nt=a(309),Pt=a(310),_t=a(313),Lt=a(3);var Mt=Object(H.a)((function(e){return{root:{color:"#eaeaf0",display:"flex",height:22,alignItems:"center"},circle:{width:8,height:8,borderRadius:"50%",backgroundColor:"#eaeaf0"},completed:{color:e.palette.primary.dark,zIndex:1,fontSize:18}}}))((function(e){var t=e.classes,a=e.active,n=e.completed;return o.a.createElement("div",{className:Object(Lt.a)(t.root,Object(g.a)({},t.active,a))},n||a?o.a.createElement(q.a,{className:t.completed}):o.a.createElement("div",{className:t.circle}))})),xt=a(239),It=Object(H.a)((function(e){return{alternativeLabel:{top:10,left:"calc(-50% + 16px)",right:"calc(50% + 16px)"},active:{"& $line":{borderColor:e.palette.primary.extraLight}},completed:{"& $line":{borderColor:e.palette.primary.extraLight}},line:{borderColor:"#eaeaf0",borderTopWidth:3,borderRadius:1}}}))(xt.a),Dt=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(M.a)(this,a),(n=t.call(this,e)).state={},n}return Object(x.a)(a,[{key:"render",value:function(){var e=this.props.steps,t=this.props.activeStep,a=this.props.classes;return o.a.createElement("div",null,o.a.createElement(Nt.a,{alternativeLabel:!0,activeStep:t,connector:o.a.createElement(It,null),className:a.stageRoot},e.map((function(e){return o.a.createElement(Pt.a,{key:e},o.a.createElement(_t.a,{StepIconComponent:Mt},e))}))))}}]),a}(r.Component),wt=Object(H.a)((function(e){return{root:{},stageRoot:{border:"none",backgroundColor:e.palette.grey[50],margin:"10px 0 10px 0"}}}))(Dt),Ut=a(318),Gt=a(311),Bt=function(){function e(){Object(M.a)(this,e)}return Object(x.a)(e,null,[{key:"NextStage",value:function(e){var t=this.Progression.indexOf(e);return t=t<this.Progression.length-1?t+1:t,this.Progression[t]}}]),e}();Bt.Progression=[Ze.GAME_STAGE.WAITING_FOR_PLAYERS,Ze.GAME_STAGE.WAITING_TO_START,Ze.GAME_STAGE.BASELINE_PLAYER_RECORDING,Ze.GAME_STAGE.OTHER_PLAYERS_LISTENING_TO_BASELINE,Ze.GAME_STAGE.OTHER_PLAYERS_RECORDING,Ze.GAME_STAGE.FINAL_RECORDING_DONE];var Ft=Bt,Ht=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(M.a)(this,a),(n=t.call(this,e)).state={},n.getGameSteps=n.getGameSteps.bind(Object(Q.a)(n)),(!e.match.params.roomId||e.match.params.roomId&&null==e.room.roomCode)&&e.getRoom(e.match.params.roomId),n}return Object(x.a)(a,[{key:"getGameSteps",value:function(){if(this.props.game.baselinePlayer){var e=Ft.Progression.indexOf(Ze.GAME_STAGE.BASELINE_PLAYER_RECORDING),t=Ft.Progression;return t[e]="".concat(this.props.game.baselinePlayer.playerName," is recording"),t}return Ft.Progression}},{key:"getCurrentGameStepIndex",value:function(){return Ft.Progression.indexOf(this.props.game.stage)}},{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement("div",{className:t.root},function(){switch(e.props.room.roomState){case Ze.ROOM_STATE.EMPTY:return o.a.createElement(Ut.a,{open:!0},o.a.createElement(Gt.a,{color:"inherit"}));case Ze.ROOM_STATE.VALID:return function(e){var t=e.user;return null!=t&&void 0!==t&&null!=t.playerName&&void 0!==t.playerName}(e.props)?e.props.game.stage==Ze.GAME_STAGE.WAITING_FOR_PLAYERS?o.a.createElement("div",null,o.a.createElement(wt,Object.assign({},e.props,{steps:e.getGameSteps(),activeStep:e.getCurrentGameStepIndex()})),o.a.createElement(pe,e.props)):o.a.createElement("div",null,o.a.createElement(wt,Object.assign({},e.props,{steps:e.getGameSteps(),activeStep:e.getCurrentGameStepIndex()})),o.a.createElement(Je,e.props)):o.a.createElement(ce,e.props);case Ze.ROOM_STATE.INVALID:default:return o.a.createElement(m.a,{to:"/"})}}())}}]),a}(r.Component),Yt=Object(H.a)((function(e){return{root:{paddingTop:10,minHeight:"95vh",backgroundColor:e.palette.grey[50]}}}))(Ht),Wt=a(319),Vt=a(149),zt=a.n(Vt),Jt=a(150),qt=a.n(Jt),Xt=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(M.a)(this,a),(n=t.call(this,e)).state={volume:100},n.handleChange=n.handleChange.bind(Object(Q.a)(n)),Me.a.Master.volume.value=10,n}return Object(x.a)(a,[{key:"handleChange",value:function(e,t){this.setState({volume:t});var a=t/5-10;Me.a.Master.volume.value=a}},{key:"render",value:function(){var e=this.props.classes;return o.a.createElement("div",{className:e.root},o.a.createElement(Z.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},o.a.createElement(Z.a,{item:!0,className:e.volumeIcon},o.a.createElement(zt.a,null)),o.a.createElement(Z.a,{item:!0,xs:!0,className:e.sliderGrid},o.a.createElement(Wt.a,{className:e.slider,value:this.state.volume,onChange:this.handleChange})),o.a.createElement(Z.a,{item:!0,className:e.volumeIcon},o.a.createElement(qt.a,null))))}}]),a}(r.Component),$t=Object(H.a)((function(e){return{root:{width:200},slider:{color:e.palette.primary.contrastText},sliderGrid:{height:"28px"},volumeIcon:{height:"24px",padding:"0 8px 0 15px"}}}))(Xt),Kt=a(151),Qt=a.n(Kt),Zt=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(M.a)(this,a),(n=t.call(this,e)).state={},n}return Object(x.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.theme;return o.a.createElement("div",{className:t.root},o.a.createElement(Qt.a,{fontSize:"small",style:{fill:a.palette.error.main}}),o.a.createElement(Gt.a,{size:20,className:t.progress}))}}]),a}(r.Component),ea=Object(Ce.a)(Object(H.a)((function(e){return{root:{paddingRight:5},progress:{position:"absolute",top:12,left:16,zIndex:1,color:e.palette.error.main}}}))(Zt)),ta=(a(202),a(30)),aa=a(152),na=a(157);var ra=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{playerName:null,messages:[],isRecording:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return Object(y.a)(Object(y.a)({},e),{},{playerName:t.playerName});case"RECEIVE_CHAT_MESSAGE":return Object(y.a)(Object(y.a)({},e),{},{messages:[].concat(Object(na.a)(e.messages),[{senderName:t.playerName,message:t.message,id:t.playerName==e.playerName?0:t.playerName}])});case"UPDATED_RECORDING_STATE":return Object(y.a)(Object(y.a)({},e),{},{isRecording:t.isRecording});default:return e}};var oa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{roomCode:null,roomState:Ze.ROOM_STATE.EMPTY,bpm:120,numBars:4,numLoops:3,lastUpdatedField:"bpm",users:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_INVALID_ROOM":return Object(y.a)(Object(y.a)({},e),{},{roomCode:t.roomCode,roomState:Ze.ROOM_STATE.INVALID});case"LOAD_ROOM":return Object(y.a)(Object(y.a)({},e),{},{roomCode:t.roomCode,roomState:Ze.ROOM_STATE.VALID,bpm:t.bpm,numBars:t.numBars,numLoops:t.numLoops,users:t.users});case"EDIT_ROOM_BPM":return Object(y.a)(Object(y.a)({},e),{},{lastUpdatedField:"bpm",bpm:t.bpm});case"ROOM_BPM_UPDATED":return Object(y.a)(Object(y.a)({},e),{},{bpm:t.bpm});case"EDIT_ROOM_NUM_BARS":return Object(y.a)(Object(y.a)({},e),{},{lastUpdatedField:"numBars",numBars:t.numBars});case"ROOM_NUMBARS_UPDATED":return Object(y.a)(Object(y.a)({},e),{},{numBars:t.numBars});case"EDIT_ROOM_NUM_LOOPS":return Object(y.a)(Object(y.a)({},e),{},{lastUpdatedField:"numLoops",numLoops:t.numLoops});case"ROOM_NUMLOOPS_UPDATED":return Object(y.a)(Object(y.a)({},e),{},{numLoops:t.numLoops});case"CHAT_MESSAGE_SENT":return Object(y.a)(Object(y.a)({},e),{},{lastUpdatedField:"chat"});case"ROOM_PLAYERS_UPDATED":return Object(y.a)(Object(y.a)({},e),{},{users:Object(y.a)({},t.users)});case"RECEIVED_AUDIO":var a=new Blob([t.audioData],{type:"audio/webm;codecs=opus"}),n=URL.createObjectURL(a);return Object(y.a)(Object(y.a)({},e),{},{users:Object(y.a)(Object(y.a)({},e.users),{},Object(g.a)({},t.playerName,Object(y.a)(Object(y.a)({},e.users[t.playerName]),{},{audioUrl:n})))});case"RECEIVED_LOOPED_AUDIO":a=new Blob([t.audioData],{type:"audio/webm;codecs=opus"});var r=URL.createObjectURL(a);return Object(y.a)(Object(y.a)({},e),{},{users:Object(y.a)(Object(y.a)({},e.users),{},Object(g.a)({},t.playerName,Object(y.a)(Object(y.a)({},e.users[t.playerName]),{},{loopUrl:r})))});case"PLAYER_UPDATED_RECORDING_STATE":return Object(y.a)(Object(y.a)({},e),{},{users:Object(y.a)(Object(y.a)({},e.users),{},Object(g.a)({},t.playerName,Object(y.a)(Object(y.a)({},e.users[t.playerName]),{},{isRecording:t.isRecording})))});default:return e}};var sa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{stage:Ft.Progression[0],baselinePlayer:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADVANCE_NEXT_STAGE":return Object(y.a)(Object(y.a)({},e),{},{stage:Ft.NextStage(e.stage)});case"SET_BASELINE_PLAYER":return Object(y.a)(Object(y.a)({},e),{},{baselinePlayer:{playerName:t.user.playerName}});default:return e}},ia=Object(u.c)({user:ra,room:oa,game:sa}),ca=a(153),la=a.n(ca),ua=a(154),ma=a.n(ua)()("/"),pa=la()(ma,"socket/"),da=Object(u.d)(ia,Object(u.a)(aa.a,pa));Object(ta.a)();var ha=da,ba=o.a.createElement(c.a,{store:ha},o.a.createElement(l.a,null,o.a.createElement(F,null)));i.a.render(ba,document.getElementById("root"))},53:function(e,t,a){e.exports=a.p+"static/media/woodblock.3bc269da.wav"}},[[169,1,2]]]);
//# sourceMappingURL=main.88ef9875.chunk.js.map